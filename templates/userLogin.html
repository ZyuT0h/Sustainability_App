{% extends "base/base.html" %}
{% block title %}Login{% endblock %}

{% block content %}
  <h1>Login</h1>
  <form id="loginForm" method="post" action="/login">
    <label for="email">Email:</label><br>
    <input type="email" id="email" name="email" required><br><br>

    <label for="password">Password:</label><br>
    <input type="password" id="password" name="password" required><br><br>

    <input type="submit" value="Login" style="display: none;">
  </form>

  <a href="/shop" id="shopLink" class="btn btn-warning">LOGIN</a>

<script>
    document.getElementById("loginForm").addEventListener("submit", function(event) {
      event.preventDefault(); // Prevent default form submission

      // Simulate form submission using fetch or AJAX
      fetch('/login', {
        method: 'POST',
        body: new FormData(document.getElementById('loginForm')),
        redirect: 'follow'
      })
      .then(response => {
        if (response.redirected) {
          window.location.href = '/shop'; // Redirect to shop on successful login
        }
      })
      .catch(error => console.error('Error:', error));
       if (email && password) {
        document.getElementById("loginForm").submit(); // Submit the form
      } else {
        alert('Please enter both email and password.');
      }
    });
</script>
{% endblock %}