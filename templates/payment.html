{% extends "/base/base_user.html" %}
{% block title %}Library Loan System - Home{% endblock %}

{% block content %}

<script>
$(document).ready(function() {
    $('#paymentForm').submit(function(event) {
        event.preventDefault(); // Prevent the default form submission

        // Submit the form via AJAX
        $.ajax({
            type: 'POST',
            url: '/payment',
            data: $('#paymentForm').serialize(),
            success: function(response) {
    });
});

</script>

<style>

        .row {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .column {
            width: 45%; /* Adjust width as needed */
            margin: 12px;
            padding: 20px;
            background-color: #f8f9fa; /* Light background color */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Box shadow for cards */
            border-radius: 8px;
            box-sizing: border-box;
        }

        form {
            display: flex;
            flex-direction: column;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
        }

        input[type="text"], button {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
            width: 100%;
        }

        button {
            background-color:  #28a745;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: red;
        }

        h1, h3 {
            text-align: center;
        }

        .grouping {
            display: flex;
            justify-content: space-between;
        }

        .grouping input[type="text"] {
            width: 48%; /* Adjust width as needed */
        }
</style>
<br>
    <a href="/cart" class="back-button">Back to Cart</a>
    <div class="row">
        <div class="column">
            <div class="form-container">
                <form method="POST" action="">
                    <h3>Address details</h3>
                    <div class="form-group">
                        <label for="U_SA">Shipping Address:</label>
                        <input type="text" id="U_SA" name="U_SA">
                    </div>
                    <div class="grouping">
                        <div class="form-group">
                            <label for="U_P">Postal:</label>
                            <input type="text" id="U_P" name="U_P">
                        </div>
                        <div class="form-group">
                            <label for="U_UN">Unit No:</label>
                            <input type="text" id="U_UN" name="U_UN">
                        </div>
                    </div>
                    <hr>
                    <h3>Card details</h3>
                    <div class="form-group">
                        <label for="U_CN">Card Name:</label>
                        <input type="text" id="U_CN" name="U_CN">
                    </div>
                    <div class="form-group">
                        <label for="U_CNO">Card Number:</label>
                        <input type="text" id="U_CNO" name="U_CNO">
                    </div>
                    <div class="grouping">
                        <div class="form-group">
                            <label for="U_ED">Expiry Date:</label>
                            <input type="text" id="U_ED" name="U_ED">
                        </div>
                        <div class="form-group">
                            <label for="U_CVC/CVV">CVC/CVV:</label>
                            <input type="text" id="U_CVC/CVV" name="U_CVC">
                        </div>
                    </div>
                    <button type="submit">Submit Payment</button>
                </form>
            </div>
        </div>
        <div class="column">
            <h2>Order summary</h2>
            <hr>
            <ul>
              {% for product_id, item in cart_items.items() %}
                <li>{{ item.name }} - Quantity: {{ item.quantity }} - Price: ${{ '%.2f'|format(item.price | float) }}</li>
              {% endfor %}
            </ul>
            <p>Total Price: ${{ '%.2f'|format(total_price) }}</p>
        </div>
    </div>

{% endblock %}